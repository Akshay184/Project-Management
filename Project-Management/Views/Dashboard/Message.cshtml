
@{
    ViewBag.Title = "Message";
}

<h2>Message</h2>

<input type="text" id="Room" />
<input type="button" id="AddMember" value="Send" />
<div id="messages"></div>
@section scripts {

    <script src="~/Scripts/jquery.signalR-2.4.0.min.js"></script>
    <script src="~/signalr/js"></script>
    @*<script src="~/Scripts/SignalR.js"></script>*@

    <script>
        (function () {

            $.connection.hub.logging = true;
            $("#AddMember").click(function () {
                $.connection.hub.start()
                    .done(function () {
                        console.log("It Worked");

                        //    $.connection.chatHub.server.joinRoom($("#Room").val())
                          $.connection.chatHub.server.joinRoom($("#Room").val())

                        $.connection.chatHub.server.sendMessage("message here  ", $("#Room").val())

                        console.log("It Worked");
                    })
                    .fail(function () {

                    });
            })


            $.connection.chatHub.client.sendMessage = function (message, groupName) {
                // $("#Room").val("")
                $("#messages").append(message + "<br />");
            }

        })()

    </script>
}

